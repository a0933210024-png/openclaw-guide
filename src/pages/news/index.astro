---
import Layout from '../../layouts/Layout.astro';
---

<Layout 
  title="AI æ–°èä¸­å¿ƒ â€” MiniBot" 
  lang="zh" 
  currentPath="/news" 
  description="æ¯æ—¥æ›´æ–° AI ç”¢æ¥­å‹•æ…‹ã€æ¨¡å‹ç™¼å¸ƒã€èè³‡æ¶ˆæ¯ã€‚ä¸­è‹±é›™èªæ‘˜è¦ï¼ŒæŒæ¡ AI è¶¨å‹¢è„ˆå‹•ã€‚"
>
  <section class="news-hero">
    <div class="container">
      <h1>ğŸ“° AI æ–°èä¸­å¿ƒ</h1>
      <p class="subtitle">æ¯æ—¥æ›´æ–° AI ç”¢æ¥­å‹•æ…‹ Â· ä¸­è‹±é›™èªæ‘˜è¦</p>
    </div>
  </section>

  <!-- Filter Tabs -->
  <section class="filter-section">
    <div class="container">
      <div class="filter-tabs">
        <button class="filter-tab active" data-category="all">å…¨éƒ¨</button>
        <button class="filter-tab" data-category="æ¨¡å‹ç™¼å¸ƒ">æ¨¡å‹ç™¼å¸ƒ</button>
        <button class="filter-tab" data-category="èè³‡å‹•æ…‹">èè³‡å‹•æ…‹</button>
        <button class="filter-tab" data-category="æŠ€è¡“çªç ´">æŠ€è¡“çªç ´</button>
        <button class="filter-tab" data-category="æ”¿ç­–ç›£ç®¡">æ”¿ç­–ç›£ç®¡</button>
        <button class="filter-tab" data-category="ç”¢æ¥­å‹•æ…‹">ç”¢æ¥­å‹•æ…‹</button>
      </div>
    </div>
  </section>

  <!-- News Grid -->
  <section class="news-section">
    <div class="container">
      <div class="news-layout">
        <div class="news-grid" id="news-grid">
          <!-- Loading state -->
          <div class="loading-message" id="loading">
            <div class="spinner"></div>
            <p>è¼‰å…¥æ–°èä¸­...</p>
          </div>
          
          <!-- Empty state (hidden by default) -->
          <div class="empty-state" id="empty-state" style="display: none;">
            <div class="empty-icon">ğŸ“°</div>
            <h3>æ–°èç³»çµ±åˆå§‹åŒ–ä¸­</h3>
            <p>å³å°‡æ›´æ–°æœ€æ–° AI ç”¢æ¥­è³‡è¨Š...</p>
          </div>
        </div>
        
        <!-- Sidebar -->
        <aside class="news-sidebar">
          <div class="sidebar-card">
            <h3>ğŸ”¥ ä»Šæ—¥ç†±é–€è©±é¡Œ</h3>
            <div class="topic-tags" id="topic-tags">
              <span class="topic-tag">GPT-5</span>
              <span class="topic-tag">Claude 3.5</span>
              <span class="topic-tag">AI ç›£ç®¡</span>
              <span class="topic-tag">é–‹æºæ¨¡å‹</span>
              <span class="topic-tag">AI æ™¶ç‰‡</span>
            </div>
          </div>
          
          <div class="sidebar-card">
            <h3>ğŸ“Š è³‡æ–™ä¾†æº</h3>
            <ul class="source-list">
              <li>TechCrunch</li>
              <li>The Information</li>
              <li>Bloomberg</li>
              <li>VentureBeat</li>
              <li>Anthropic Blog</li>
              <li>OpenAI Blog</li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <script is:inline>
    let allArticles = [];
    let currentCategory = 'all';
    
    // Demo articles (fallback)
    const demoArticles = [
      {
        titleZh: "Anthropic æ¨å‡º Enterprise ç‰ˆ Claudeï¼Œæ”¯æ´ç™¾è¬ Token é•·ä¸Šä¸‹æ–‡",
        title: "Anthropic Launches Enterprise Claude with Million-Token Context",
        summaryZh: "Anthropic å®£å¸ƒæ¨å‡ºä¼æ¥­ç‰ˆ Claudeï¼Œæ“´å±•ä¸Šä¸‹æ–‡çª—å£æ”¯æŒå¤§è¦æ¨¡å•†æ¥­æ‡‰ç”¨ã€‚",
        summary: "Anthropic announced Enterprise Claude with expanded context window support for large-scale business applications.",
        url: "https://www.anthropic.com/news",
        source: "Anthropic Blog",
        category: "æ¨¡å‹ç™¼å¸ƒ",
        publishedAt: "2026-02-25T10:00:00Z"
      },
      {
        titleZh: "OpenAI GPT-5 å³å°‡ç™¼å¸ƒï¼Œæ“šå‚³æ¨ç†èƒ½åŠ›å¤§èºé€²",
        title: "OpenAI GPT-5 Launch Imminent, Reasoning Leap Expected",
        summaryZh: "å ±å°æŒ‡å‡º OpenAI çš„ GPT-5 å°‡å…·å‚™é¡¯è‘—æ”¹å–„çš„æ¨ç†èƒ½åŠ›ï¼Œå°‡åœ¨æ•¸é€±å…§æ¨å‡ºã€‚",
        summary: "Reports suggest OpenAI's GPT-5 will feature significantly improved reasoning capabilities, launching within weeks.",
        url: "https://www.theinformation.com",
        source: "The Information",
        category: "æ¨¡å‹ç™¼å¸ƒ",
        publishedAt: "2026-02-24T14:30:00Z"
      },
      {
        titleZh: "Nvidia å¸‚å€¼çªç ´ $4 å…†ï¼Œæˆå²ä¸Šæœ€é«˜å¸‚å€¼å…¬å¸",
        title: "Nvidia Market Cap Surpasses $4 Trillion, Highest Ever",
        summaryZh: "å— AI æ™¶ç‰‡éœ€æ±‚æ¿€å¢æ¨å‹•ï¼ŒNvidia å¸‚å€¼é”åˆ°æ­·å²æ€§çš„ 4 å…†ç¾å…ƒã€‚",
        summary: "Nvidia's market capitalization reached a historic $4 trillion, driven by surging AI chip demand.",
        url: "https://www.bloomberg.com",
        source: "Bloomberg",
        category: "ç”¢æ¥­å‹•æ…‹",
        publishedAt: "2026-02-23T16:00:00Z"
      }
    ];
    
    function formatTimeAgo(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
      const diffDays = Math.floor(diffHours / 24);
      
      if (diffHours < 1) return 'å‰›å‰›';
      if (diffHours < 24) return `${diffHours} å°æ™‚å‰`;
      if (diffDays < 7) return `${diffDays} å¤©å‰`;
      return date.toLocaleDateString('zh-TW');
    }
    
    function getCategoryColor(category) {
      const colors = {
        'æ¨¡å‹ç™¼å¸ƒ': '#8b5cf6',
        'èè³‡å‹•æ…‹': '#10b981',
        'æŠ€è¡“çªç ´': '#f59e0b',
        'æ”¿ç­–ç›£ç®¡': '#ef4444',
        'ç”¢æ¥­å‹•æ…‹': '#3b82f6'
      };
      return colors[category] || '#6b7280';
    }
    
    function renderArticles(articles) {
      const grid = document.getElementById('news-grid');
      const loading = document.getElementById('loading');
      const emptyState = document.getElementById('empty-state');
      
      if (loading) loading.style.display = 'none';
      
      if (articles.length === 0) {
        emptyState.style.display = 'block';
        return;
      }
      
      emptyState.style.display = 'none';
      
      const html = articles.map(article => {
        const categoryColor = getCategoryColor(article.category);
        return `
          <article class="news-card">
            <div class="news-header">
              <span class="news-category" style="background-color: ${categoryColor}20; color: ${categoryColor}">
                ${article.category}
              </span>
              <span class="news-time">${formatTimeAgo(article.publishedAt)}</span>
            </div>
            <h3 class="news-title">${article.titleZh || article.title}</h3>
            <p class="news-summary">${article.summaryZh || article.summary}</p>
            <div class="news-footer">
              <span class="news-source">ğŸ“¡ ${article.source}</span>
              <a href="${article.url}" target="_blank" rel="noopener noreferrer" class="news-link">
                é–±è®€åŸæ–‡ â†’
              </a>
            </div>
          </article>
        `;
      }).join('');
      
      grid.innerHTML = html;
    }
    
    function filterArticles(category) {
      currentCategory = category;
      const filtered = category === 'all' 
        ? allArticles 
        : allArticles.filter(a => a.category === category);
      renderArticles(filtered);
    }
    
    async function loadNews() {
      try {
        const res = await fetch('/news.json');
        
        if (!res.ok) {
          // Use demo articles as fallback
          allArticles = demoArticles;
          renderArticles(allArticles);
          return;
        }
        
        const data = await res.json();
        
        // If no articles in JSON, use demo
        if (!data.articles || data.articles.length === 0) {
          allArticles = demoArticles;
        } else {
          allArticles = data.articles;
        }
        
        renderArticles(allArticles);
        
      } catch (error) {
        console.error('Failed to load news:', error);
        // Fallback to demo articles
        allArticles = demoArticles;
        renderArticles(allArticles);
      }
    }
    
    // Filter tabs functionality
    document.addEventListener('DOMContentLoaded', () => {
      const filterTabs = document.querySelectorAll('.filter-tab');
      
      filterTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          filterTabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          const category = tab.getAttribute('data-category');
          filterArticles(category);
        });
      });
      
      loadNews();
    });
  </script>

  <style>
    .news-hero {
      background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);
      color: white;
      padding: 80px 0 60px;
      text-align: center;
    }
    
    .news-hero h1 {
      font-size: 48px;
      font-weight: 800;
      margin: 0 0 12px;
    }
    
    .subtitle {
      font-size: 20px;
      opacity: 0.95;
    }
    
    .filter-section {
      padding: 40px 0 20px;
      background: #f8f9fa;
    }
    
    .filter-tabs {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .filter-tab {
      padding: 10px 20px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 24px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .filter-tab:hover {
      border-color: #f59e0b;
      color: #f59e0b;
    }
    
    .filter-tab.active {
      background: #f59e0b;
      color: white;
      border-color: #f59e0b;
    }
    
    .news-section {
      padding: 40px 0 80px;
      background: #f8f9fa;
    }
    
    .news-layout {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 32px;
    }
    
    .news-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 24px;
      align-content: start;
    }
    
    .loading-message {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 20px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e5e7eb;
      border-top-color: #f59e0b;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 80px 20px;
    }
    
    .empty-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }
    
    .empty-state h3 {
      font-size: 24px;
      margin: 0 0 8px;
      color: #1f2937;
    }
    
    .empty-state p {
      color: #6b7280;
      margin: 0;
    }
    
    .news-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      border: 2px solid #e5e7eb;
      transition: all 0.3s;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .news-card:hover {
      border-color: #f59e0b;
      box-shadow: 0 8px 24px rgba(245, 158, 11, 0.12);
      transform: translateY(-2px);
    }
    
    .news-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .news-category {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 700;
    }
    
    .news-time {
      font-size: 12px;
      color: #9ca3af;
      font-weight: 600;
    }
    
    .news-title {
      font-size: 18px;
      font-weight: 700;
      margin: 0;
      color: #1f2937;
      line-height: 1.4;
    }
    
    .news-summary {
      font-size: 14px;
      line-height: 1.6;
      color: #6b7280;
      margin: 0;
      flex-grow: 1;
    }
    
    .news-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      padding-top: 12px;
      border-top: 1px solid #f3f4f6;
    }
    
    .news-source {
      font-size: 12px;
      color: #6b7280;
      font-weight: 600;
    }
    
    .news-link {
      color: #f59e0b;
      font-weight: 600;
      font-size: 14px;
      text-decoration: none;
    }
    
    .news-link:hover {
      text-decoration: underline;
    }
    
    .news-sidebar {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    
    .sidebar-card {
      background: white;
      padding: 24px;
      border-radius: 12px;
      border: 2px solid #e5e7eb;
    }
    
    .sidebar-card h3 {
      font-size: 16px;
      font-weight: 700;
      margin: 0 0 16px;
      color: #1f2937;
    }
    
    .topic-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .topic-tag {
      background: #fef3c7;
      color: #92400e;
      padding: 6px 14px;
      border-radius: 16px;
      font-size: 13px;
      font-weight: 600;
    }
    
    .source-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .source-list li {
      font-size: 14px;
      color: #6b7280;
      padding-left: 20px;
      position: relative;
    }
    
    .source-list li::before {
      content: "â€¢";
      position: absolute;
      left: 0;
      color: #f59e0b;
      font-weight: bold;
    }
    
    @media (max-width: 1024px) {
      .news-layout {
        grid-template-columns: 1fr;
      }
      
      .news-sidebar {
        order: -1;
      }
    }
    
    @media (max-width: 768px) {
      .news-hero h1 {
        font-size: 32px;
      }
      
      .news-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</Layout>
