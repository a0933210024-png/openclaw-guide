---
import Layout from '../../layouts/Layout.astro';
import StepCard from '../../components/StepCard.astro';
---

<Layout title="Connect Telegram to OpenClaw" lang="en" currentPath="/guide/telegram" description="How to connect a Telegram bot to OpenClaw step by step.">
  <div class="page-hero">
    <div class="container">
      <span class="badge badge-cyan">Telegram Guide</span>
      <h1>Connect Telegram</h1>
      <p class="page-subtitle">Turn your OpenClaw AI into a Telegram bot you can message from anywhere. Setup takes about 5 minutes.</p>
    </div>
  </div>

  <div class="page-content">
    <div class="container">
      <div class="content-grid">
        <aside class="toc">
          <div class="toc-inner">
            <div class="toc-title">On This Page</div>
            <ul>
              <li><a href="#why-telegram">Why Telegram?</a></li>
              <li><a href="#botfather">Set Up with BotFather</a></li>
              <li><a href="#openclaw-config">Configure OpenClaw</a></li>
              <li><a href="#test">Test the Connection</a></li>
            </ul>
          </div>
        </aside>

        <article class="article">
          <section id="why-telegram" class="article-section">
            <h2>Why Connect to Telegram?</h2>
            <p>
              Telegram is one of the best channels for OpenClaw for several reasons: it has a
              <strong>first-class bot API</strong> that's fast and reliable, supports rich message formatting (Markdown, code blocks),
              handles file attachments natively, and works on every platform ‚Äî iOS, Android, macOS, Windows, Linux, and the web.
            </p>
            <p>
              Once connected, you can message your AI assistant from your phone while commuting, from your laptop at the office,
              or from the Telegram web client. The bot responds instantly and maintains full conversation context through OpenClaw's
              session management.
            </p>
            <div class="info-box">
              <span class="info-icon">üì±</span>
              <div>
                <strong>No WhatsApp Business account needed</strong> ‚Äî Unlike WhatsApp, Telegram lets anyone create a bot for free
                with zero business verification. It's the easiest channel to get started with.
              </div>
            </div>
          </section>

          <section id="botfather" class="article-section">
            <h2>Set Up with BotFather</h2>
            <p>BotFather is Telegram's official bot for creating and managing other bots. It's the starting point for all Telegram bots.</p>

            <StepCard number={1} title="Open BotFather in Telegram">
              <p>Open Telegram and search for <strong>@BotFather</strong>, or click this link: <code>t.me/BotFather</code></p>
              <p>Make sure it's the verified one (has a blue checkmark ‚úì). Start a conversation by clicking <strong>Start</strong>.</p>
            </StepCard>

            <StepCard number={2} title="Create a new bot">
              <p>Send the command:</p>
              <pre><code>/newbot</code></pre>
              <p>BotFather will ask you two questions:</p>
              <ul>
                <li><strong>Name</strong> ‚Äî the display name of your bot (e.g., "My AI Assistant")</li>
                <li><strong>Username</strong> ‚Äî must end in <code>bot</code> and be unique (e.g., <code>my_ai_assistant_bot</code>)</li>
              </ul>
            </StepCard>

            <StepCard number={3} title="Copy your bot token">
              <p>After creating the bot, BotFather sends you a message like:</p>
              <pre><code>Done! Congratulations on your new bot. You will find it at t.me/my_ai_assistant_bot.
Use this token to access the HTTP API:
7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw</code></pre>
              <p>
                <strong>Copy and save this token.</strong> It's a long string that looks like <code>1234567890:ABC...xyz</code>.
                Treat it like a password ‚Äî anyone with this token can control your bot.
              </p>
              <div class="tip-box">
                <strong>Lost your token?</strong> Send <code>/mybots</code> to BotFather ‚Üí select your bot ‚Üí API Token to get it again.
              </div>
            </StepCard>

            <StepCard number={4} title="(Optional) Configure your bot">
              <p>For a better experience, set a description and commands:</p>
              <pre><code>/setdescription ‚Äî A brief description shown in the bot's profile
/setcommands ‚Äî Define slash commands (e.g., /help, /clear)</code></pre>
              <p>Example command list to send to BotFather:</p>
              <pre><code>help - Show available commands
clear - Clear conversation history
status - Show gateway status</code></pre>
            </StepCard>
          </section>

          <section id="openclaw-config" class="article-section">
            <h2>Configure OpenClaw</h2>

            <StepCard number={1} title="Run the channel login wizard">
              <pre><code>openclaw channels login</code></pre>
              <p>Select <strong>Telegram</strong> from the menu.</p>
            </StepCard>

            <StepCard number={2} title="Paste your bot token">
              <p>When prompted, paste the token you got from BotFather:</p>
              <pre><code>Enter your Telegram bot token: 7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw</code></pre>
              <p>OpenClaw will validate the token by calling the Telegram API and show your bot's username if successful.</p>
            </StepCard>

            <StepCard number={3} title="(Optional) Restrict to your user ID">
              <p>
                For security, you can restrict the bot to only respond to your Telegram user ID.
                To find your user ID, message <code>@userinfobot</code> on Telegram.
              </p>
              <pre><code>Restrict to user ID? (leave blank for open access): 987654321</code></pre>
              <p>With this set, the bot ignores messages from anyone else.</p>
            </StepCard>

            <StepCard number={4} title="Restart the gateway">
              <pre><code>openclaw gateway restart</code></pre>
              <p>Or if you used the daemon:</p>
              <pre><code>openclaw gateway stop && openclaw gateway start</code></pre>
            </StepCard>
          </section>

          <section id="test" class="article-section">
            <h2>Test the Connection</h2>

            <p>Open Telegram, find your bot (the username you set in BotFather), and send it a message:</p>

            <div class="chat-demo">
              <div class="chat-msg user">
                <div class="chat-bubble">Hello! Are you working?</div>
                <div class="chat-meta">You</div>
              </div>
              <div class="chat-msg bot">
                <div class="chat-bubble">
                  Hey! Yes, I'm online and connected through OpenClaw. I'm your AI assistant ‚Äî what can I help you with today?
                </div>
                <div class="chat-meta">Your Bot</div>
              </div>
            </div>

            <div class="success-box">
              <strong>‚úÖ Working!</strong> If you see a response, Telegram is fully connected. Your AI is now reachable from your phone 24/7.
            </div>

            <h3>Troubleshooting</h3>
            <div class="faq-list">
              <div class="faq-item">
                <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
                  Bot doesn't respond at all
                  <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-a">
                  <p>Check that the gateway is running: <code>openclaw gateway status</code></p>
                  <p>Check the logs: <code>openclaw gateway logs</code> ‚Äî look for Telegram connection errors.</p>
                  <p>Make sure you sent <code>/start</code> to the bot first ‚Äî Telegram requires this before bots can send messages.</p>
                </div>
              </div>
              <div class="faq-item">
                <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
                  "Unauthorized" error in logs
                  <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-a">
                  <p>Your bot token is invalid or has been revoked. Re-run <code>openclaw channels login</code> and paste a fresh token from BotFather (<code>/mybots</code> ‚Üí select bot ‚Üí API Token).</p>
                </div>
              </div>
            </div>
          </section>

          <div class="nav-buttons">
            <a href="/guide/install" class="btn btn-outline">‚Üê Install Guide</a>
            <a href="/guide/first-persona" class="btn btn-primary">Next: Create a Persona ‚Üí</a>
          </div>
        </article>
      </div>
    </div>
  </div>
</Layout>

<style>
  .page-hero {
    background: linear-gradient(180deg, rgba(0,212,255,0.07) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
    padding: 4rem 0 3rem;
  }
  .page-hero .badge { margin-bottom: 1rem; }
  .page-hero h1 { margin-bottom: 1rem; }
  .page-subtitle { font-size: 1.1rem; max-width: 600px; line-height: 1.7; }

  .page-content { padding: 3rem 0 5rem; }
  .content-grid { display: grid; grid-template-columns: 220px 1fr; gap: 3rem; align-items: start; }

  .toc-inner {
    position: sticky; top: 84px;
    background: var(--bg2); border: 1px solid var(--border);
    border-radius: var(--radius); padding: 1.25rem;
  }
  .toc-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text2); font-weight: 700; margin-bottom: 0.75rem; }
  .toc ul { list-style: none; }
  .toc li { margin-bottom: 0.4rem; }
  .toc a { color: var(--text2); font-size: 0.875rem; }
  .toc a:hover { color: var(--accent); opacity: 1; }

  .article-section { margin-bottom: 3.5rem; }
  .article-section h2 { font-size: 1.75rem; margin-bottom: 1.25rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--border); }
  .article-section h3 { margin: 1.5rem 0 1rem; }
  .article-section p { margin-bottom: 1rem; line-height: 1.8; }
  .article-section ul { list-style: none; padding: 0; margin: 0.75rem 0 1rem; }
  .article-section ul li { padding: 0.3rem 0 0.3rem 1.5rem; position: relative; color: var(--text2); font-size: 0.95rem; }
  .article-section ul li::before { content: "‚Üí"; position: absolute; left: 0; color: var(--accent); }
  .article-section pre { margin: 1rem 0; }

  .info-box, .tip-box, .success-box {
    display: flex; gap: 0.75rem; padding: 1rem 1.25rem;
    border-radius: var(--radius); margin: 1.25rem 0; font-size: 0.9rem; line-height: 1.6;
  }
  .info-box { background: rgba(0,212,255,0.05); border: 1px solid rgba(0,212,255,0.2); color: var(--text2); }
  .info-icon { font-size: 1.1rem; flex-shrink: 0; margin-top: 0.1rem; }
  .tip-box { background: rgba(255,107,53,0.05); border: 1px solid rgba(255,107,53,0.2); color: var(--text2); }
  .success-box { background: rgba(0,200,100,0.06); border: 1px solid rgba(0,200,100,0.2); color: var(--text2); }

  .chat-demo {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    margin: 1.5rem 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .chat-msg { display: flex; flex-direction: column; max-width: 75%; }
  .chat-msg.user { align-self: flex-end; align-items: flex-end; }
  .chat-msg.bot { align-self: flex-start; }
  .chat-bubble {
    padding: 0.75rem 1rem;
    border-radius: 12px;
    font-size: 0.9rem;
    line-height: 1.5;
  }
  .chat-msg.user .chat-bubble { background: var(--accent); color: white; }
  .chat-msg.bot .chat-bubble { background: var(--bg3); color: var(--text); }
  .chat-meta { font-size: 0.75rem; color: var(--text2); margin-top: 0.25rem; }

  .faq-list { margin-top: 1rem; }
  .nav-buttons {
    display: flex; justify-content: space-between; align-items: center;
    padding-top: 2rem; border-top: 1px solid var(--border); margin-top: 1rem;
  }

  @media (max-width: 900px) {
    .content-grid { grid-template-columns: 1fr; }
    .toc { display: none; }
  }
</style>
