---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="MiniBot â€” AI è¶¨å‹¢åœ’åœ° Â· AI Trend Hub" 
  lang="zh" 
  currentPath="/" 
  description="æŒæ¡ AI ç”¢æ¥­è„ˆå‹•ï¼Œå¾æ–°æ‰‹åˆ°è€æ‰‹éƒ½çœ‹å¾—æ‡‚ã€‚AI ç”¢æ¥­åœ°åœ– Ã— æ¯æ—¥æ–°è Ã— æ–°æ‰‹å…¥é–€ï¼ä¸€ç«™æå®š"
>
  <!-- Hero Section - Editorial Style -->
  <section class="hero">
    <div class="container">
      <div class="hero-eyebrow">
        <span class="live-dot"></span>
        <span>AI ç”¢æ¥­å³æ™‚è¿½è¹¤</span>
        <span class="hero-date" id="hero-date"></span>
      </div>
      <h1 class="hero-title">æŒæ¡ AI ç”¢æ¥­<br><em>æ¯ä¸€å€‹é—œéµå‹•æ…‹</em></h1>
      <p class="hero-sub">34 å®¶ AI å…¬å¸è‚¡åƒ¹ Â· æ¯æ—¥æ–°èå½™æ•´ Â· å®Œæ•´æ–°æ‰‹å…¥é–€</p>
    </div>
    
    <!-- è‚¡ç¥¨è·‘é¦¬ç‡ˆ -->
    <div class="ticker-bar">
      <div class="ticker-track" id="ticker-track">
        <div class="ticker-item">
          <span class="ticker-name">NVDA</span>
          <span class="ticker-price">$143.25</span>
          <span class="ticker-change up">+2.4%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">MSFT</span>
          <span class="ticker-price">$420.80</span>
          <span class="ticker-change up">+1.2%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">GOOGL</span>
          <span class="ticker-price">$164.50</span>
          <span class="ticker-change down">-0.8%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">META</span>
          <span class="ticker-price">$512.30</span>
          <span class="ticker-change up">+3.1%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">TSLA</span>
          <span class="ticker-price">$195.70</span>
          <span class="ticker-change down">-1.5%</span>
        </div>
        <!-- è¤‡è£½ä¸€æ¬¡è®“è·‘é¦¬ç‡ˆé€£çºŒ -->
        <div class="ticker-item">
          <span class="ticker-name">NVDA</span>
          <span class="ticker-price">$143.25</span>
          <span class="ticker-change up">+2.4%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">MSFT</span>
          <span class="ticker-price">$420.80</span>
          <span class="ticker-change up">+1.2%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">GOOGL</span>
          <span class="ticker-price">$164.50</span>
          <span class="ticker-change down">-0.8%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">META</span>
          <span class="ticker-price">$512.30</span>
          <span class="ticker-change up">+3.1%</span>
        </div>
        <div class="ticker-item">
          <span class="ticker-name">TSLA</span>
          <span class="ticker-price">$195.70</span>
          <span class="ticker-change down">-1.5%</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats Bar - Compact Dashboard -->
  <section class="stats-bar">
    <div class="stat-item">
      <div class="stat-value mono" id="total-companies">34</div>
      <div class="stat-label">AI è¿½è¹¤å…¬å¸</div>
    </div>
    <div class="stat-item">
      <div class="stat-value mono" id="total-marketcap">--</div>
      <div class="stat-label">è¿½è¹¤å¸‚å€¼ï¼ˆå…†ç¾å…ƒï¼‰</div>
    </div>
    <div class="stat-item">
      <div class="stat-value mono" id="news-count">--</div>
      <div class="stat-label">æœ¬é€±æ–°è</div>
    </div>
    <div class="stat-item">
      <div class="stat-value mono" id="last-updated">--</div>
      <div class="stat-label">æœ€å¾Œæ›´æ–°</div>
    </div>
  </section>

  <!-- Three Sections - Editorial Cards -->
  <section class="sections-grid">
    <a href="/industry" class="section-card">
      <div class="section-icon">ğŸ”­</div>
      <div class="section-label">INDUSTRY</div>
      <h3 class="section-title">AI ç”¢æ¥­å…¨æ™¯</h3>
      <p class="section-desc">å¾æ™¶ç‰‡åˆ°æ‡‰ç”¨ï¼ŒæŒæ¡æ•´å€‹ AI åƒ¹å€¼éŠã€‚è¿½è¹¤ 34 å®¶æ ¸å¿ƒå…¬å¸ï¼Œå«ä¸Šå¸‚è‚¡åƒ¹èˆ‡ç§äººå…¬å¸ä¼°å€¼ã€‚</p>
      <span class="section-arrow">â†’</span>
    </a>
    <a href="/news" class="section-card">
      <div class="section-icon">ğŸ“°</div>
      <div class="section-label">NEWS</div>
      <h3 class="section-title">AI æ–°èä¸­å¿ƒ</h3>
      <p class="section-desc">æ¯æ—¥æ›´æ–° AI ç”¢æ¥­å‹•æ…‹ã€æ¨¡å‹ç™¼å¸ƒã€èè³‡æ¶ˆæ¯ã€‚ä¸­è‹±é›™èªæ‘˜è¦ï¼Œä¸éŒ¯éä»»ä½•é‡è¦è³‡è¨Šã€‚</p>
      <span class="section-arrow">â†’</span>
    </a>
    <a href="/guide/install" class="section-card">
      <div class="section-icon">ğŸ“š</div>
      <div class="section-label">GUIDE</div>
      <h3 class="section-title">æ–°æ‰‹æŒ‡å—</h3>
      <p class="section-desc">æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Telegramã€WhatsAppã€Discord è£ä¸Š AI åŠ©ç†ã€‚5 åˆ†é˜é–‹å§‹ä½¿ç”¨ï¼Œé›¶ç¨‹å¼åŸºç¤ã€‚</p>
      <span class="section-arrow">â†’</span>
    </a>
  </section>

  <script>
    // Update hero date
    const now = new Date();
    const dateStr = now.toLocaleDateString('zh-TW', { 
      year: 'numeric', 
      month: '2-digit', 
      day: '2-digit',
      weekday: 'short'
    });
    document.getElementById('hero-date')!.textContent = dateStr;

    // Fetch and display stats from JSON files
    async function loadStats() {
      try {
        // Load stocks data
        const stocksRes = await fetch('/stocks.json');
        if (stocksRes.ok) {
          const stocksData = await stocksRes.json();
          
          // Calculate total market cap
          let totalMarketCap = 0;
          Object.values(stocksData.stocks).forEach((stock: any) => {
            totalMarketCap += stock.marketCapB || 0;
          });
          
          if (totalMarketCap > 0) {
            document.getElementById('total-marketcap')!.textContent = 
              (totalMarketCap / 1000).toFixed(1);
          }
          
          // Format last updated
          if (stocksData.lastUpdated) {
            const date = new Date(stocksData.lastUpdated);
            const now = new Date();
            const diffHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));
            
            let timeText = '';
            if (diffHours < 1) timeText = 'å‰›å‰›';
            else if (diffHours < 24) timeText = `${diffHours}h`;
            else timeText = `${Math.floor(diffHours / 24)}d`;
            
            document.getElementById('last-updated')!.textContent = timeText;
          }
          
          // Update ticker with real data
          const tickerTrack = document.getElementById('ticker-track');
          if (tickerTrack) {
            const tickers = ['NVDA', 'MSFT', 'GOOGL', 'META', 'TSLA', 'AMD', 'AAPL', 'AMZN'];
            let tickerHTML = '';
            
            tickers.forEach(ticker => {
              const stock = stocksData.stocks[ticker];
              if (stock && stock.price > 0) {
                const changeClass = stock.changePct >= 0 ? 'up' : 'down';
                const changeSign = stock.changePct >= 0 ? '+' : '';
                tickerHTML += `
                  <div class="ticker-item">
                    <span class="ticker-name">${ticker}</span>
                    <span class="ticker-price">$${stock.price.toFixed(2)}</span>
                    <span class="ticker-change ${changeClass}">${changeSign}${stock.changePct.toFixed(1)}%</span>
                  </div>
                `;
              }
            });
            
            // è¤‡è£½å…©æ¬¡è®“è·‘é¦¬ç‡ˆé€£çºŒ
            tickerTrack.innerHTML = tickerHTML + tickerHTML;
          }
        }
        
        // Load news data
        const newsRes = await fetch('/news.json');
        if (newsRes.ok) {
          const newsData = await newsRes.json();
          
          // Count articles from last 7 days
          const weekAgo = new Date();
          weekAgo.setDate(weekAgo.getDate() - 7);
          
          const recentNews = newsData.articles.filter((article: any) => {
            const articleDate = new Date(article.publishedAt);
            return articleDate > weekAgo;
          });
          
          document.getElementById('news-count')!.textContent = 
            recentNews.length > 0 ? recentNews.length.toString() : '3';
        } else {
          document.getElementById('news-count')!.textContent = '3';
        }
        
      } catch (error) {
        console.error('Failed to load stats:', error);
      }
    }
    
    loadStats();
  </script>

  <style>
    /* Hero - Editorial Style */
    .hero {
      padding: 64px 0 0;
      border-bottom: 1px solid var(--border);
      overflow: hidden;
    }

    .hero-eyebrow {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text2);
      margin-bottom: 24px;
    }

    .live-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--green);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .hero-title {
      font-size: clamp(40px, 6vw, 72px);
      font-weight: 700;
      line-height: 1.05;
      letter-spacing: -0.03em;
      margin: 0 0 20px;
      color: var(--text);
    }

    .hero-title em {
      font-style: normal;
      color: var(--accent-bright);
    }

    .hero-sub {
      font-size: 18px;
      color: var(--text2);
      margin: 0 0 48px;
    }

    /* è‚¡ç¥¨è·‘é¦¬ç‡ˆ */
    .ticker-bar {
      background: var(--bg2);
      border-top: 1px solid var(--border);
      overflow: hidden;
      padding: 12px 0;
    }

    .ticker-track {
      display: flex;
      gap: 32px;
      white-space: nowrap;
      animation: scrollLeft 30s linear infinite;
    }

    .ticker-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-family: var(--mono);
    }

    .ticker-name {
      color: var(--text2);
      font-weight: 500;
    }

    .ticker-price {
      color: var(--text);
      font-weight: 600;
    }

    .ticker-change.up {
      color: var(--green);
    }

    .ticker-change.down {
      color: var(--red);
    }

    @keyframes scrollLeft {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* Stats Bar - Compact Dashboard */
    .stats-bar {
      display: flex;
      align-items: center;
      gap: 0;
      border-bottom: 1px solid var(--border);
      overflow-x: auto;
    }

    .stat-item {
      padding: 20px 32px;
      border-right: 1px solid var(--border);
      flex-shrink: 0;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--text);
      letter-spacing: -0.03em;
      margin-bottom: 2px;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text2);
    }

    /* Sections Grid - Editorial Cards */
    .sections-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 1px;
      background: var(--border);
      margin: 0;
    }

    .section-card {
      background: var(--bg);
      padding: 40px;
      text-decoration: none;
      color: var(--text);
      display: block;
      transition: background 0.2s;
      position: relative;
      overflow: hidden;
    }

    .section-card:hover {
      background: var(--bg2);
    }

    .section-card::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--accent-bright);
      transform: scaleX(0);
      transition: transform 0.3s;
      transform-origin: left;
    }

    .section-card:hover::after {
      transform: scaleX(1);
    }

    .section-icon {
      font-size: 24px;
      margin-bottom: 16px;
    }

    .section-label {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text3);
      margin-bottom: 8px;
    }

    .section-title {
      font-size: 22px;
      font-weight: 700;
      margin: 0 0 12px;
      letter-spacing: -0.02em;
    }

    .section-desc {
      font-size: 14px;
      color: var(--text2);
      line-height: 1.5;
      margin: 0;
    }

    .section-arrow {
      position: absolute;
      bottom: 24px;
      right: 24px;
      font-size: 20px;
      color: var(--text3);
      transition: transform 0.2s, color 0.2s;
    }

    .section-card:hover .section-arrow {
      transform: translate(4px, -4px);
      color: var(--accent-bright);
    }

    @media (max-width: 1024px) {
      .sections-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 768px) {
      .hero {
        padding: 48px 0 0;
      }

      .hero-title {
        font-size: 36px;
      }

      .hero-sub {
        font-size: 16px;
        margin-bottom: 32px;
      }

      .stats-bar {
        overflow-x: scroll;
      }

      .stat-item {
        padding: 16px 24px;
      }

      .sections-grid {
        grid-template-columns: 1fr;
      }

      .section-card {
        padding: 32px 24px;
      }
    }
  </style>
</Layout>
