---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="MiniBot â€” AI è¶¨å‹¢åœ’åœ° Â· AI Trend Hub" 
  lang="zh" 
  currentPath="/" 
  description="æŒæ¡ AI ç”¢æ¥­è„ˆå‹•ï¼Œå¾æ–°æ‰‹åˆ°è€æ‰‹éƒ½çœ‹å¾—æ‡‚ã€‚AI ç”¢æ¥­åœ°åœ– Ã— æ¯æ—¥æ–°è Ã— æ–°æ‰‹å…¥é–€ï¼ä¸€ç«™æå®š"
>
  <!-- Hero Section -->
  <section class="hero-new">
    <div class="container">
      <div class="hero-badge-new">
        <span class="badge badge-gradient">AI è¶¨å‹¢åœ’åœ° Â· AI Trend Hub</span>
      </div>
      <h1 class="hero-title-new">
        æŒæ¡ AI ç”¢æ¥­è„ˆå‹•
      </h1>
      <p class="hero-subtitle-new">
        AI ç”¢æ¥­åœ°åœ– Ã— æ¯æ—¥æ–°è Ã— æ–°æ‰‹å…¥é–€ï¼ä¸€ç«™æå®š
      </p>
      <div class="hero-cta-new">
        <a href="/industry" class="btn-new btn-primary-new">
          ğŸ”­ æŸ¥çœ‹ AI ç”¢æ¥­åœ–
        </a>
        <a href="/news" class="btn-new btn-secondary-new">
          ğŸ“° çœ‹æœ€æ–° AI æ–°è
        </a>
      </div>
    </div>
  </section>

  <!-- Stats Cards -->
  <section class="stats-section">
    <div class="container">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-value" id="total-companies">34</div>
          <div class="stat-label">AI è¿½è¹¤å…¬å¸</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ’°</div>
          <div class="stat-value" id="total-marketcap">-- </div>
          <div class="stat-label">è¿½è¹¤å¸‚å€¼ï¼ˆå…†ç¾å…ƒï¼‰</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“°</div>
          <div class="stat-value" id="news-count">--</div>
          <div class="stat-label">æœ¬é€±æ–°è</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">âš¡</div>
          <div class="stat-value" id="last-updated">--</div>
          <div class="stat-label">æœ€å¾Œæ›´æ–°</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Three Main Sections -->
  <section class="sections-preview">
    <div class="container">
      <div class="sections-grid">
        <a href="/industry" class="section-card">
          <div class="section-icon">ğŸ”­</div>
          <h3>AI ç”¢æ¥­å…¨æ™¯</h3>
          <p>å¾æ™¶ç‰‡åˆ°æ‡‰ç”¨ï¼ŒæŒæ¡æ•´å€‹ AI åƒ¹å€¼éŠã€‚è¿½è¹¤ 34 å®¶æ ¸å¿ƒå…¬å¸ï¼Œå«ä¸Šå¸‚è‚¡åƒ¹èˆ‡ç§äººå…¬å¸ä¼°å€¼ã€‚</p>
          <span class="section-link">æ¢ç´¢ç”¢æ¥­åœ°åœ– â†’</span>
        </a>
        <a href="/news" class="section-card">
          <div class="section-icon">ğŸ“°</div>
          <h3>AI æ–°èä¸­å¿ƒ</h3>
          <p>æ¯æ—¥æ›´æ–° AI ç”¢æ¥­å‹•æ…‹ã€æ¨¡å‹ç™¼å¸ƒã€èè³‡æ¶ˆæ¯ã€‚ä¸­è‹±é›™èªæ‘˜è¦ï¼Œä¸éŒ¯éä»»ä½•é‡è¦è³‡è¨Šã€‚</p>
          <span class="section-link">é–±è®€æœ€æ–°æ–°è â†’</span>
        </a>
        <a href="/guide/install" class="section-card">
          <div class="section-icon">ğŸ“š</div>
          <h3>æ–°æ‰‹æŒ‡å—</h3>
          <p>æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Telegramã€WhatsAppã€Discord è£ä¸Š AI åŠ©ç†ã€‚5 åˆ†é˜é–‹å§‹ä½¿ç”¨ï¼Œé›¶ç¨‹å¼åŸºç¤ã€‚</p>
          <span class="section-link">é–‹å§‹å­¸ç¿’ â†’</span>
        </a>
      </div>
    </div>
  </section>

  <script>
    // Fetch and display stats from JSON files
    async function loadStats() {
      try {
        // Load stocks data
        const stocksRes = await fetch('/stocks.json');
        if (stocksRes.ok) {
          const stocksData = await stocksRes.json();
          
          // Calculate total market cap
          let totalMarketCap = 0;
          Object.values(stocksData.stocks).forEach((stock: any) => {
            totalMarketCap += stock.marketCapB || 0;
          });
          
          if (totalMarketCap > 0) {
            document.getElementById('total-marketcap')!.textContent = 
              (totalMarketCap / 1000).toFixed(1);
          }
          
          // Format last updated
          if (stocksData.lastUpdated) {
            const date = new Date(stocksData.lastUpdated);
            const now = new Date();
            const diffHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));
            
            let timeText = '';
            if (diffHours < 1) timeText = 'å‰›å‰›';
            else if (diffHours < 24) timeText = `${diffHours} å°æ™‚å‰`;
            else timeText = `${Math.floor(diffHours / 24)} å¤©å‰`;
            
            document.getElementById('last-updated')!.textContent = timeText;
          }
        }
        
        // Load news data
        const newsRes = await fetch('/news.json');
        if (newsRes.ok) {
          const newsData = await newsRes.json();
          
          // Count articles from last 7 days
          const weekAgo = new Date();
          weekAgo.setDate(weekAgo.getDate() - 7);
          
          const recentNews = newsData.articles.filter((article: any) => {
            const articleDate = new Date(article.publishedAt);
            return articleDate > weekAgo;
          });
          
          document.getElementById('news-count')!.textContent = 
            recentNews.length > 0 ? recentNews.length.toString() : '3';
        } else {
          // Fallback to demo count
          document.getElementById('news-count')!.textContent = '3';
        }
        
      } catch (error) {
        console.error('Failed to load stats:', error);
      }
    }
    
    loadStats();
  </script>

  <style>
    .hero-new {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 120px 0 80px;
      text-align: center;
    }
    
    .hero-badge-new {
      margin-bottom: 24px;
    }
    
    .badge-gradient {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
    }
    
    .hero-title-new {
      font-size: 56px;
      font-weight: 800;
      margin: 0 0 16px;
      line-height: 1.2;
    }
    
    .hero-subtitle-new {
      font-size: 20px;
      opacity: 0.95;
      max-width: 600px;
      margin: 0 auto 40px;
      line-height: 1.6;
    }
    
    .hero-cta-new {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .btn-new {
      padding: 14px 32px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      display: inline-block;
      transition: all 0.2s;
    }
    
    .btn-primary-new {
      background: white;
      color: #667eea;
    }
    
    .btn-primary-new:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }
    
    .btn-secondary-new {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 2px solid white;
    }
    
    .btn-secondary-new:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .stats-section {
      padding: 60px 0;
      background: #f8f9fa;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .stat-card {
      background: white;
      padding: 32px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .stat-icon {
      font-size: 36px;
      margin-bottom: 12px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 800;
      color: #667eea;
      margin-bottom: 4px;
    }
    
    .stat-label {
      font-size: 14px;
      color: #6b7280;
    }
    
    .sections-preview {
      padding: 80px 0;
    }
    
    .sections-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 32px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .section-card {
      background: white;
      padding: 40px;
      border-radius: 16px;
      border: 2px solid #e5e7eb;
      text-decoration: none;
      color: inherit;
      transition: all 0.3s;
      display: block;
    }
    
    .section-card:hover {
      border-color: #667eea;
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(102, 126, 234, 0.15);
    }
    
    .section-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .section-card h3 {
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 12px;
      color: #1f2937;
    }
    
    .section-card p {
      font-size: 15px;
      line-height: 1.7;
      color: #6b7280;
      margin: 0 0 20px;
    }
    
    .section-link {
      color: #667eea;
      font-weight: 600;
      font-size: 14px;
    }
    
    @media (max-width: 768px) {
      .hero-title-new {
        font-size: 36px;
      }
      
      .hero-subtitle-new {
        font-size: 16px;
      }
      
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }
      
      .sections-grid {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }
  </style>
</Layout>
